<!-- templates/admin_components/users_management.html -->
<div class="container-fluid py-4">

  <!-- 驻住 住驻转 砖转砖 -->
  <form id="addUserForm"
        class="row g-2 align-items-center justify-content-center">

    <!-- 砖 砖专 -->
    <div class="col-auto form-floating fixed-input">
      <input id="officeName" name="office_name"
             class="form-control form-control-sm"
             placeholder="砖 砖专" required autocomplete="off">
      <label for="officeName">砖 砖专</label>
    </div>

    <!-- 砖 砖转砖 -->
    <div class="col-auto form-floating fixed-input">
      <input id="userName" name="username"
             class="form-control form-control-sm"
             placeholder="砖 砖转砖" required autocomplete="off">
      <label for="userName">砖 砖转砖</label>
    </div>

    <!-- 住住 -->
    <div class="col-auto form-floating fixed-input">
      <input id="userPass" name="password" type="password"
             class="form-control form-control-sm"
             placeholder="住住" required>
      <label for="userPass">住住</label>
    </div>

    <!-- 驻转专 住祝 -->
    <div class="col-auto d-grid">
      <button class="btn btn-add btn-primary btn-sm small-btn">住祝</button>
    </div>
  </form>

  <hr>

  <!-- 转 砖转砖 -->
  <table id="usersTable" class="text-center align-middle w-100">
    <thead>
      <tr>
        <th>砖 砖专</th>
        <th>砖 砖转砖</th>
        <th>爪专</th>
        <th>驻住 住住</th>
        <th>拽</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.office_name }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.created_at }}</td>

        <!-- 驻住/注 住住 -->
        <td>
          {% if u.username != 'admin' %}
          <form onsubmit="updateUser(event, '{{ u.username }}')" class="d-flex gap-2">
            <input type="password" name="password"
                   class="form-control form-control-sm"
                   placeholder="住住 砖" required>
            <button class="btn btn-primary btn-sm small-btn">注</button>
          </form>
          {% else %} --- {% endif %}
        </td>

        <!-- 拽 -->
        <td>
          {% if u.username != 'admin' %}
          <button class="btn btn-delete btn-sm small-btn"
                  onclick="deleteUser('{{ u.username }}')"></button>
          {% else %} --- {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>
